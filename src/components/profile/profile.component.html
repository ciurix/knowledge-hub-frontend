<div class="flex h-screen overflow-hidden bg-background-light text-slate-900 font-display">
  <!-- Sidebar Navigation -->
  <aside class="w-72 bg-white border-r border-slate-200 flex flex-col h-full shrink-0">
    <div class="p-6 flex items-center gap-3">
      <div class="size-10 bg-primary rounded-lg flex items-center justify-center text-white">
        <span class="material-symbols-outlined text-2xl">menu_book</span>
      </div>
      <div>
        <h1 class="heading-font text-lg font-bold leading-none">Knowledge</h1>
        <p class="text-xs text-primary font-bold uppercase tracking-wider">Hub</p>
      </div>
    </div>
    <nav class="flex-1 px-4 mt-4 space-y-1 overflow-y-auto">
      <a routerLink="/" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-50 transition-colors cursor-pointer group">
        <span class="material-symbols-outlined text-slate-500 group-hover:text-primary">home</span>
        <span class="text-sm font-semibold">Home</span>
      </a>
      <a routerLink="/dashboard" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-50 transition-colors cursor-pointer group">
        <span class="material-symbols-outlined text-slate-500 group-hover:text-primary">dashboard</span>
        <span class="text-sm font-semibold">My Tutorials</span>
      </a>
      <div class="flex items-center gap-3 px-4 py-3 rounded-xl bg-primary/10 text-primary transition-colors cursor-pointer">
        <span class="material-symbols-outlined fill-[1]">person</span>
        <span class="text-sm font-bold">My Profile</span>
      </div>
      @if (isAdmin()) {
        <a routerLink="/admin" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-amber-50 transition-colors cursor-pointer group">
          <span class="material-symbols-outlined text-amber-500">shield</span>
          <span class="text-sm font-semibold text-amber-700">Admin Panel</span>
        </a>
      }
    </nav>
    <div class="p-4 border-t border-slate-100">
      <div class="flex items-center gap-3 p-2 rounded-xl bg-slate-50">
        <div class="size-10 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold">
          {{ getUserInitial() }}
        </div>
        <div class="flex-1 overflow-hidden">
          <p class="text-sm font-bold truncate">{{ getUserEmail() }}</p>
          <p class="text-xs text-slate-500 truncate capitalize">{{ getUserRole() }}</p>
        </div>
        <button (click)="authService.logout()" class="material-symbols-outlined text-slate-400 text-sm cursor-pointer hover:text-red-500">logout</button>
      </div>
    </div>
  </aside>

  <!-- Main Content Area -->
  <main class="flex-1 overflow-y-auto bg-background-light scroll-smooth p-8">
    @if (isLoading()) {
      <div class="flex items-center justify-center min-h-[60vh]">
        <div class="text-center">
          <span class="material-symbols-outlined text-5xl text-primary animate-pulse">hourglass_empty</span>
          <p class="mt-4 text-slate-500 font-medium">Loading profile...</p>
        </div>
      </div>
    } @else {
      <div class="max-w-5xl mx-auto space-y-8">
        <!-- Profile Header -->
        <div class="bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden">
          <div class="h-32 bg-gradient-to-r from-primary to-primary-dark"></div>
          <div class="px-8 pb-8">
            <div class="flex flex-col md:flex-row md:items-end gap-6 -mt-12">
              <div class="size-24 rounded-2xl bg-white border-4 border-white shadow-lg flex items-center justify-center text-primary text-4xl font-bold">
                {{ getUserInitial() }}
              </div>
              <div class="flex-1">
                <h1 class="text-2xl font-extrabold text-slate-900">{{ getUserName() }}</h1>
                <p class="text-slate-500">{{ getUserEmail() }}</p>
              </div>
              <div class="flex items-center gap-3">
                @if (isAdmin()) {
                  <span class="inline-flex items-center gap-1 px-3 py-1.5 bg-amber-100 text-amber-700 rounded-full text-sm font-bold">
                    <span class="material-symbols-outlined text-sm">shield</span>
                    Admin
                  </span>
                } @else {
                  <span class="inline-flex items-center gap-1 px-3 py-1.5 bg-primary/10 text-primary rounded-full text-sm font-bold">
                    <span class="material-symbols-outlined text-sm">school</span>
                    Instructor
                  </span>
                }
                <a routerLink="/editor" class="inline-flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg font-bold hover:bg-primary-dark transition-colors">
                  <span class="material-symbols-outlined text-lg">add</span>
                  New Tutorial
                </a>
              </div>
            </div>
          </div>
        </div>

        <!-- Stats Grid -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
          <!-- Total Tutorials -->
          <div class="bg-white rounded-xl border border-slate-100 p-6 shadow-sm">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm font-medium text-slate-500">Total Tutorials</p>
                <p class="text-3xl font-extrabold text-slate-900 mt-1">{{ totalTutorials() }}</p>
              </div>
              <div class="size-12 rounded-xl bg-primary/10 flex items-center justify-center">
                <span class="material-symbols-outlined text-primary text-2xl">library_books</span>
              </div>
            </div>
          </div>

          <!-- Published -->
          <div class="bg-white rounded-xl border border-slate-100 p-6 shadow-sm">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm font-medium text-slate-500">Published</p>
                <p class="text-3xl font-extrabold text-green-600 mt-1">{{ publishedCount() }}</p>
              </div>
              <div class="size-12 rounded-xl bg-green-100 flex items-center justify-center">
                <span class="material-symbols-outlined text-green-600 text-2xl">check_circle</span>
              </div>
            </div>
          </div>

          <!-- Drafts -->
          <div class="bg-white rounded-xl border border-slate-100 p-6 shadow-sm">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm font-medium text-slate-500">Drafts</p>
                <p class="text-3xl font-extrabold text-amber-600 mt-1">{{ draftCount() }}</p>
              </div>
              <div class="size-12 rounded-xl bg-amber-100 flex items-center justify-center">
                <span class="material-symbols-outlined text-amber-600 text-2xl">edit_note</span>
              </div>
            </div>
          </div>

          <!-- Member Since -->
          <div class="bg-white rounded-xl border border-slate-100 p-6 shadow-sm">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm font-medium text-slate-500">Member Since</p>
                <p class="text-lg font-bold text-slate-900 mt-1">{{ formatDate(memberSince()) }}</p>
              </div>
              <div class="size-12 rounded-xl bg-purple-100 flex items-center justify-center">
                <span class="material-symbols-outlined text-purple-600 text-2xl">calendar_month</span>
              </div>
            </div>
          </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
          <!-- Category Breakdown -->
          <div class="bg-white rounded-xl border border-slate-100 shadow-sm overflow-hidden">
            <div class="px-6 py-4 border-b border-slate-100">
              <h2 class="font-bold text-slate-900">Tutorials by Category</h2>
            </div>
            <div class="p-4">
              @if (categoryStats().length === 0) {
                <p class="text-center text-slate-400 py-8">No tutorials yet</p>
              } @else {
                <ul class="space-y-3">
                  @for (cat of categoryStats(); track cat.slug) {
                    <li class="flex items-center justify-between p-3 rounded-lg hover:bg-slate-50 transition-colors">
                      <div class="flex items-center gap-3">
                        <div class="size-10 rounded-lg bg-primary/10 flex items-center justify-center">
                          <span class="material-symbols-outlined text-primary">{{ cat.icon }}</span>
                        </div>
                        <span class="font-medium text-slate-700">{{ cat.name }}</span>
                      </div>
                      <span class="px-3 py-1 bg-slate-100 rounded-full text-sm font-bold text-slate-600">{{ cat.count }}</span>
                    </li>
                  }
                </ul>
              }
            </div>
          </div>

          <!-- Recent Tutorials -->
          <div class="lg:col-span-2 bg-white rounded-xl border border-slate-100 shadow-sm overflow-hidden">
            <div class="px-6 py-4 border-b border-slate-100 flex items-center justify-between">
              <h2 class="font-bold text-slate-900">Recent Tutorials</h2>
              <a routerLink="/dashboard" class="text-sm text-primary font-semibold hover:underline">View All</a>
            </div>
            <div class="divide-y divide-slate-100">
              @if (recentTutorials().length === 0) {
                <div class="p-8 text-center">
                  <span class="material-symbols-outlined text-4xl text-slate-300 mb-2">description</span>
                  <p class="text-slate-400">No tutorials yet. Create your first one!</p>
                  <a routerLink="/editor" class="inline-flex items-center gap-2 mt-4 px-4 py-2 bg-primary text-white rounded-lg font-bold hover:bg-primary-dark transition-colors">
                    <span class="material-symbols-outlined text-lg">add</span>
                    Create Tutorial
                  </a>
                </div>
              } @else {
                @for (tutorial of recentTutorials(); track tutorial._id) {
                  <div class="p-4 hover:bg-slate-50 transition-colors flex items-center gap-4">
                    <div class="size-12 rounded-lg bg-indigo-100 flex items-center justify-center shrink-0">
                      <span class="material-symbols-outlined text-indigo-600">article</span>
                    </div>
                    <div class="flex-1 min-w-0">
                      <h3 class="font-semibold text-slate-900 truncate cursor-pointer hover:text-primary" (click)="viewTutorial(tutorial._id!)">
                        {{ tutorial.title }}
                      </h3>
                      <div class="flex items-center gap-3 mt-1 text-sm text-slate-400">
                        <span>{{ formatShortDate(tutorial.createdAt) }}</span>
                        <span class="size-1 rounded-full bg-slate-300"></span>
                        @if (tutorial.published) {
                          <span class="text-green-600 font-medium">Published</span>
                        } @else {
                          <span class="text-amber-600 font-medium">Draft</span>
                        }
                      </div>
                    </div>
                    <button (click)="editTutorial(tutorial._id!)" class="p-2 text-slate-400 hover:text-primary hover:bg-primary/10 rounded-lg transition-colors">
                      <span class="material-symbols-outlined">edit</span>
                    </button>
                  </div>
                }
              }
            </div>
          </div>
        </div>

        <!-- Quick Actions -->
        <div class="bg-white rounded-xl border border-slate-100 shadow-sm p-6">
          <h2 class="font-bold text-slate-900 mb-4">Quick Actions</h2>
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
            <a routerLink="/editor" class="flex items-center gap-3 p-4 rounded-xl border border-slate-200 hover:border-primary hover:bg-primary/5 transition-colors cursor-pointer group">
              <div class="size-10 rounded-lg bg-primary/10 flex items-center justify-center group-hover:bg-primary group-hover:text-white transition-colors">
                <span class="material-symbols-outlined text-primary group-hover:text-white">add_circle</span>
              </div>
              <div>
                <p class="font-semibold text-slate-900">New Tutorial</p>
                <p class="text-xs text-slate-400">Create content</p>
              </div>
            </a>
            <a routerLink="/dashboard" class="flex items-center gap-3 p-4 rounded-xl border border-slate-200 hover:border-primary hover:bg-primary/5 transition-colors cursor-pointer group">
              <div class="size-10 rounded-lg bg-indigo-100 flex items-center justify-center">
                <span class="material-symbols-outlined text-indigo-600">dashboard</span>
              </div>
              <div>
                <p class="font-semibold text-slate-900">Dashboard</p>
                <p class="text-xs text-slate-400">Manage tutorials</p>
              </div>
            </a>
            <a routerLink="/" class="flex items-center gap-3 p-4 rounded-xl border border-slate-200 hover:border-primary hover:bg-primary/5 transition-colors cursor-pointer group">
              <div class="size-10 rounded-lg bg-green-100 flex items-center justify-center">
                <span class="material-symbols-outlined text-green-600">explore</span>
              </div>
              <div>
                <p class="font-semibold text-slate-900">Explore</p>
                <p class="text-xs text-slate-400">Browse tutorials</p>
              </div>
            </a>
            @if (isAdmin()) {
              <a routerLink="/admin" class="flex items-center gap-3 p-4 rounded-xl border border-slate-200 hover:border-amber-500 hover:bg-amber-50 transition-colors cursor-pointer group">
                <div class="size-10 rounded-lg bg-amber-100 flex items-center justify-center">
                  <span class="material-symbols-outlined text-amber-600">settings</span>
                </div>
                <div>
                  <p class="font-semibold text-slate-900">Admin</p>
                  <p class="text-xs text-slate-400">Manage categories</p>
                </div>
              </a>
            } @else {
              <div class="flex items-center gap-3 p-4 rounded-xl border border-slate-200 bg-slate-50 cursor-default">
                <div class="size-10 rounded-lg bg-slate-200 flex items-center justify-center">
                  <span class="material-symbols-outlined text-slate-400">help</span>
                </div>
                <div>
                  <p class="font-semibold text-slate-900">Help</p>
                  <p class="text-xs text-slate-400">Get support</p>
                </div>
              </div>
            }
          </div>
        </div>
      </div>
    }
  </main>
</div>

